<div class="container">


    <div class="row">
        <div class="col-md-6">
            <input ng-model="query" type="text" class="form-control"
                   name="query"  placeholder="Type something..." autocomplete="off"
                   z-keypress="search()">
        </div>
        <div class="col-md-2">
            <button ng-click="search()" type="submit" class="btn btn-primary">Search</button>
        </div>

    </div>

    <div class="row">
        <div class="col-md-12">
            <p class="text-info">
                Found <span class="label label-primary">{{result.hits.total}}</span> hits in
                <span class="label label-primary">{{result.took}} ms</span>
            </p>
        </div>
    </div>


    <div class="row">
        <div class="col-md-12">
            <table class="table table-striped table-bordered table-hover table-condensed">
                <thead>
                <tr>
                    <th>Country</th>
                    <th>Count</th>
                    <th>Per Year</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="bucket in result.aggregations.by_country.buckets">
                    <td>{{bucket.key}}</td>
                    <td>{{bucket.doc_count}}</td>
                    <td>
                        <table class="table table-striped table-bordered table-hover table-condensed">
                            <thead>
                            <tr>
                                <th>year</th>
                                <th ng-repeat="year in bucket.by_year.buckets">{{year.key_as_string}}</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>persons</td>
                                <td ng-repeat="year in bucket.by_year.buckets">{{year.doc_count}}</td>
                            </tr>
                            <tr>
                                <td>children</td>
                                <td ng-repeat="year in bucket.by_year.buckets">{{year.avg_children.value.toFixed(1)}}
                                </td>
                            </tr>

                            <tbody>
                        </table>

                    </td>
                </tr>

                <tbody>
            </table>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <table class="table" >
                <thead>
                <tr>
                    <th>Id</th>
                    <th>Name</th>
                    <th>Gender</th>
                    <th>Date Of Birth</th>
                    <th>City</th>
                    <th>Country</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="entry in result.hits.hits" >
                    <td>{{entry._id}}</td>
                    <td><a href="#/person/{{entry._id}}">{{entry._source.name}}</a></td>
                    <td>{{entry._source.gender}}</td>
                    <td>{{entry._source.dateOfBirth}}</td>
                    <td>{{entry._source.address.city}}</td>
                    <td>{{entry._source.address.country}}</td>
                </tr>

                <tbody>
            </table>
        </div>
    </div>

</div>



